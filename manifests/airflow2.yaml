id: airflow2
name: Airflow 2
description: |
  Airflow 2 integration
blocks:
  - title: Overview
    content: |+
      The Airflow 2 integration significantly enhances data discovery and observability capabilities for Airflow 2 workflows,
      providing an efficient and powerful solution for users seeking to optimize their data management experience.
      ## Utilizing ODD Airflow 2 Collector with Airflow 2
      To fully harness the potential of OpenDataDiscovery in conjunction with Airflow 2,
      users should utilize the [ODD Airflow 2 Collector](https://github.com/opendatadiscovery/odd-airflow-2).


      > It is essential to understand that since the ODD Airflow 2 Collector does not execute additional analytical queries against the actual data,
      some metrics may not reflect precise values.
      For instance, the `rows_count` metric might provide an estimated number of rows in a table instead of an exact figure
  - title: Configure
    content: |+
      ## ODD Platform
      To integrate ODD Airflow 2 Collector with the ODD Platform, users must first establish a collector entity within the platform by following these steps:

      1. Navigate to the "Management" section and select "Collectors".
      2. Click on the "Add Collector" button to initiate the process.
      3. Input a unique name for the collector and, optionally, provide a namespace to further categorize and organize the entity. Additionally, you may include a brief description to give more context and information about the collector.
      4. Click "Save" to finalize the setup, and take note of the generated token. This token will be required for incorporating it into the ODD Airflow 2 Collector's configuration YAML file, ensuring secure communication between the two components.

      ## ODD Airflow 2 Collector
      The process of configuring the ODD Airflow 2 Collector involves creating and customizing a single, well-structured YAML configuration file

      ````yaml
      # ODD Platform's host URL
      platform_host_url: https://your.odd.platform

      # Default pulling interval in minutes
      default_pulling_interval: 10

      # Collector's specific security token
      token: ""

      plugins:
        - type: airflow2
          # Data source's name
          name: airflow2_adapter
          # Optional Data source's description
          description: "Airflow 2 sample workflows"
          # Airflow 2 host
          host: host
          # Airflow 2 port
          port: port
          # Airflow 2 user
          user: user
          # Airflow 2 user password
          password: password
      ````
    snippets:
      - template: |+
          ````yaml
          platform_host_url: {{ platform_url }}
          default_pulling_interval: 10
          token: <Security token>
          plugins:
            - type: airflow2
              name: {{ ds_name }}
              description: {{ plugin_description }}
              host: {{ plugin_host }}
              port: {{ plugin_port }}
              user: {{ plugin_user }}
              password: <Password for {{ plugin_user }}>
          ````
        arguments:
          - parameter: platform_url
            type: STRING
            static: true
          - parameter: ds_name
            name: Data source name
            type: STRING
          - parameter: plugin_description
            name: Data source description
            type: STRING
          - parameter: plugin_host
            name: Host
            type: STRING
          - parameter: plugin_port
            name: Port
            type: INTEGER
          - parameter: plugin_user
            name: User
            type: STRING
